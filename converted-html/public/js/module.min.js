var MODULE=function(e){function t(e){return function(t){for(var n in t){var i="{{\\s?"+n+"\\s?}}";e=e.replace(new RegExp(i,"ig"),t[n])}return e}}function n(e){return function(t){return new Date(t.deadline)<e&&new Date(t.deadline)>new Date&&!i(t)?!0:!1}}function i(e){return e.done}function a(e){for(var t=document.querySelectorAll("."+e),n=0;n<t.length;n++)t[n].classList.remove("active")}function s(t,n){for(var i=0;i<e.config.tasks.list.length;i++)t.childNodes[i].style.display=n(e.config.tasks.list[i])?"block":"none"}return e.config={tasks:{scheme:{texts:"string",deadline:"date",done:"boolean"},list:[]},tabs:{scheme:{name:"string",condition:"function"},list:[{name:"Today",condition:n((new Date).setDate((new Date).getDate()+1))},{name:"Week",condition:n((new Date).setDate((new Date).getDate()+7))},{name:"All",condition:function(e){return!i(e)}},{name:"Done",condition:i}]},myForm:[{label:"",type:"string",name:"text",placeholder:"Task"},{label:"till",type:"date",name:"till",placeholder:new Date}],addNewInput:function(t,n,i,a){e.config.myForm.push({label:t,type:n,name:i,placeholder:a}),e.config.tasks.scheme[i]=n},addNewFilter:function(t,n){e.config.tabs.list.push({name:t,condition:n})}},e.toDo=document.createElement("div"),e.Task=function(t){for(var n=Object.keys(e.config.tasks.scheme),i=0;i<t.length;i++){var a=n[i];this[a]=t[i]}},e.init=function(t,n,i){if(n){this.config.myForm=n;for(var a=0;a<n.length;a++)e.config.tasks.scheme[n.name]=n.type}i&&(this.config.tabs.list=i),this.render(t)},e.renderTask=function(e){var n=t('<section class="task"><input type="checkbox" {{checked}}<p> {{task}}</p></section>');this.toDo.innerHTML+=n({task:e.texts,checked:e.done?"checked":""})},e.render=function(e){e.innerHTML="";for(var n=0;n<this.config.myForm.length;n++)e.innerHTML+=t("<div class='form-group'><label> {{label}} </label><input type={{myType}} class='form-control'"+'placeholder="{{myPlaceholder}}" name="{{myName}}" required></div>')({label:this.config.myForm[n].label,myType:this.config.myForm[n].type,myPlaceholder:this.config.myForm[n].placeholder,myName:this.config.myForm[n].name});e.innerHTML="<form name='create' class='form-inline' onsubmit = 'MODULE.createTask(this);return false;'>"+e.innerHTML+"<button class='btn btn-default'>create</button></form>";for(var i="",n=0;n<this.config.tabs.list.length;n++)i+=t("<li class='tab__control__item' onclick='MODULE.activePanel(this)'><a href='#'>{{title}}</a></li>")({title:this.config.tabs.list[n].name});e.innerHTML+="<nav class='nav nav-tabs'>"+i+"</nav>",this.toDo.innerHTML="";for(var n=0;n<this.config.tasks.list.length;n++)this.renderTask(this.config.tasks.list[n]);e.appendChild(this.toDo)},e.createTask=function(e){for(var t=[],n=0;n<e.elements.length;n++)t[n]="date"==e.elements[n].type?new Date(e.elements[n].value):e.elements[n].value?e.elements[n].value:!1;var i=new this.Task(t);this.config.tasks.list.push(i),e.reset(),this.renderTask(i)},e.activePanel=function(t){a("tab__control__item"),t.classList.add("active");for(var n=0;n<e.config.tabs.list.length;n++)e.config.tabs.list[n].name==t.textContent&&s(e.toDo,e.config.tabs.list[n].condition)},e}({});MODULE.init(document.getElementsByClassName("container")[0]);