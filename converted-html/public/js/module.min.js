var MODULE=function(e){function t(e){return function(t){return new Date(t.deadline)<e&&new Date(t.deadline)>new Date&&!n(t)?!0:!1}}function n(e){return e.done}function i(e){for(var t=document.querySelectorAll("."+e),n=0;n<t.length;n++)t[n].classList.remove("active")}function a(t,n){for(var i=0;i<e.config.tasks.list.length;i++)t.childNodes[i].style.display=n(e.config.tasks.list[i])?"block":"none"}return e.config={tasks:{scheme:{texts:"string",deadline:"date",done:"boolean"},list:[]},tabs:{scheme:{name:"string",condition:"function"},list:[{name:"Today",condition:t((new Date).setDate((new Date).getDate()+1))},{name:"Week",condition:t((new Date).setDate((new Date).getDate()+7))},{name:"All",condition:function(e){return!n(e)}},{name:"Done",condition:n}]},myForm:[{label:"",type:"string",name:"text",placeholder:"Task"},{label:"till",type:"date",name:"till",placeholder:new Date}],addNewInput:function(t,n,i,a){e.config.myForm.push({label:t,type:n,name:i,placeholder:a}),e.config.tasks.scheme[i]=n},addNewFilter:function(t,n){e.config.tabs.list.push({name:t,condition:n})}},e.toDo=document.createElement("div"),e.Task=function(t){for(var n=Object.keys(e.config.tasks.scheme),i=0;i<t.length;i++){var a=n[i];this[a]=t[i]}},e.init=function(t,n,i){if(n){this.config.myForm=n;for(var a=0;a<n.length;a++)e.config.tasks.scheme[n.name]=n.type}i&&(this.config.tabs.list=i),this.render(t)},e.renderTask=function(e){this.toDo.innerHTML+='<section class="task"><input type="checkbox"<p>'+e.texts+"</p></section>"},e.render=function(e){e.innerHTML="";for(var t=0;t<this.config.myForm.length;t++)e.innerHTML+="<div class='form-group'><label>"+this.config.myForm[t].label+"</label><input type='"+this.config.myForm[t].type+"' class='form-control'placeholder=\""+this.config.myForm[t].placeholder+'" name="'+this.config.myForm[t].name+'" required></div>';e.innerHTML="<form name='create' class='form-inline' onsubmit = 'MODULE.createTask(this); return false;'>"+e.innerHTML+"<button class='btn btn-default'>create</button></form>";for(var n="",t=0;t<this.config.tabs.list.length;t++)n+="<li class='tab__control__item' onclick='MODULE.activePanel(this)'><a href='#'>"+this.config.tabs.list[t].name+"</a></li>";e.innerHTML+="<nav class='nav nav-tabs'>"+n+"</nav>",this.toDo.innerHTML="";for(var t=0;t<this.config.tasks.list.length;t++)this.renderTask(this.config.tasks.list[t]);e.appendChild(this.toDo)},e.createTask=function(e){for(var t=[],n=0;n<e.elements.length;n++)t[n]="date"==e.elements[n].type?new Date(e.elements[n].value):e.elements[n].value?e.elements[n].value:!1;var i=new this.Task(t);this.config.tasks.list.push(i),e.reset(),this.renderTask(i)},e.activePanel=function(t){i("tab__control__item"),t.classList.add("active");for(var n=0;n<e.config.tabs.list.length;n++)e.config.tabs.list[n].name==t.textContent&&a(e.toDo,e.config.tabs.list[n].condition)},e}({});MODULE.init(document.getElementsByClassName("container")[0]);