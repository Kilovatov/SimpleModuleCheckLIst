var MODULE=function(e){function t(e){return function(t){for(var n in t){var a="{{\\s?"+n+"\\s?}}";e=e.replace(new RegExp(a,"ig"),t[n])}return e}}function n(e){return function(t){return new Date(t.deadline)<e&&new Date(t.deadline)>new Date&&!a()(t)?!0:!1}}function a(){return function(e){return e.done}}function s(e){for(var t=document.querySelectorAll("."+e),n=0;n<t.length;n++)t[n].classList.remove("active")}function i(t,n){for(var a=0;a<e.tasks.list.length;a++)t.childNodes[a].style.display=n(e.tasks.list[a])?"block":"none"}return e.toDo=document.createElement("div"),e.tasks={scheme:{texts:"string",deadline:"date",done:"boolean"},list:[]},e.tabs={scheme:{name:"string",condition:"function"},list:[{name:"Today",condition:n((new Date).setDate((new Date).getDate()+1))},{name:"Week",condition:n((new Date).setDate((new Date).getDate()+7))},{name:"All",condition:function(e){return!a(e)}},{name:"Done",condition:a}]},e.formDefault=[{label:"",type:"text",name:"text",placeholder:"Task"},{label:"till",type:"date",name:"till",placeholder:new Date}],e.Task=function(t){for(var n=Object.keys(e.tasks.scheme),a=0;a<t.length;a++){var s=n[a];this[s]=t[a]}},e.init=function(e){this.render(e),this.addFunctionality()},e.renderTask=function(e){var n=t('<section class="task"><input type="checkbox" {{checked}}><p>{{ task }}</p><button class="btn btn-default" name="del">delete</button><button type="button" class="btn btn-default" name="move">move to</button><button type="button" class="btn btn-default" name="edit">edit</button></section>');this.toDo.innerHTML+=n({task:e.texts,checked:e.done?"checked":""})},e.render=function(e){var n=document.createElement("form");n.name="create",n.classList.add("form-inline");for(var a=0;a<this.formDefault.length;a++){var s=document.createElement("div");s.classList.add("form-group"),s.innerHTML=t('<label>{{ label }}</label><input type={{ myType }} class="form-control"placeholder={{myPlaceholder}} name="myName" required>')({label:this.formDefault[a].label,myType:this.formDefault[a].type,myPlaceholder:this.formDefault[a].placeholder,myName:this.formDefault[a].name}),n.appendChild(s)}var i=document.createElement("button");i.classList.add("btn"),i.classList.add("btn-default"),i.innerHTML="create",n.appendChild(i),e.appendChild(n);var l=document.createElement("nav");l.classList.add("nav"),l.classList.add("nav-tabs");for(var a=0;a<this.tabs.list.length;a++){var o=document.createElement("li");o.classList.add("tab__control__item"),o.innerHTML=t('<a href="#">{{ title }}</a>')({title:this.tabs.list[a].name}),l.appendChild(o),"All"==this.tabs.list[a].name&&o.classList.add("active")}e.appendChild(l),this.toDo.innerHTML="";for(var a=0;a<this.tasks.list.length;a++)this.renderTask(this.tasks.list[a]);e.appendChild(this.toDo)},e.createTask=function(e){for(var t=[],n=0;n<e.elements.length;n++)t[n]="date"==e.elements[n].type?new Date(e.elements[n].value):e.elements[n].value?e.elements[n].value:!1;var a=new this.Task(t);this.tasks.list.push(a),e.reset(),this.renderTask(a)},e.addFunctionality=function(){for(var t=document.getElementsByClassName("tab__control__item"),n=0;n<t.length;n++)t[n].addEventListener("click",function(){s("tab__control__item"),this.classList.add("active");for(var t=0;t<e.tabs.list.length;t++)e.tabs.list[t].name==this.textContent&&i(e.toDo,e.tabs.list[t].condition)});var a=document.getElementsByName("create")[0];a.onsubmit=function(t){e.createTask(this),e.addFunctionality(),t.preventDefault()}},e}({});MODULE.init(document.getElementsByClassName("container")[0]);