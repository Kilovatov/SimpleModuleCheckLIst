var MODULE=function(e){function t(e){return function(t){for(var n in t){var a="{{\\s?"+n+"\\s?}}";e=e.replace(new RegExp(a,"ig"),t[n])}return e}}function n(e){return function(t){return new Date(t.deadline)<e&&new Date(t.deadline)>new Date&&!a(t)?!0:!1}}function a(e){return e.done}function i(e){for(var t=document.querySelectorAll("."+e),n=0;n<t.length;n++)t[n].classList.remove("active")}function s(t,n){for(var a=0;a<e.config.tasks.list.length;a++)t.childNodes[a].style.display=n(e.config.tasks.list[a])?"block":"none"}return e.config={tasks:{scheme:{texts:"string",deadline:"date",done:"boolean"},list:[]},tabs:{scheme:{name:"string",condition:"function"},list:[{name:"Today",condition:n((new Date).setDate((new Date).getDate()+1))},{name:"Week",condition:n((new Date).setDate((new Date).getDate()+7))},{name:"All",condition:function(e){return!a(e)}},{name:"Done",condition:a}]},myForm:[{label:"",type:"string",name:"text",placeholder:"Task"},{label:"till",type:"date",name:"till",placeholder:new Date}],addNewInput:function(t,n,a,i){e.config.myForm.push({label:t,type:n,name:a,placeholder:i}),e.config.tasks.scheme[a]=n},addNewFilter:function(t,n){e.config.tabs.list.push({name:t,condition:n})}},e.toDo=document.createElement("div"),e.Task=function(t){for(var n=Object.keys(e.config.tasks.scheme),a=0;a<t.length;a++){var i=n[a];this[i]=t[a]}},e.init=function(t,n,a){if(n){this.config.myForm=n;for(var i=0;i<n.length;i++)e.config.tasks.scheme[n.name]=n.type}a&&(this.config.tabs.list=a),this.render(t),this.addFunctionality(t)},e.renderTask=function(e){var n=t('<section class="task"><input type="checkbox" {{checked}}><p>{{ task }}</p><button class="btn btn-default" name="del">delete</button><button type="button" class="btn btn-default" name="move">move to</button><button type="button" class="btn btn-default" name="edit">edit</button></section>');this.toDo.innerHTML+=n({task:e.texts,checked:e.done?"checked":""})},e.render=function(e){var n=document.createElement("form");n.name="create",n.classList.add("form-inline");for(var a=0;a<this.config.myForm.length;a++){var i=document.createElement("div");i.classList.add("form-group"),i.innerHTML=t('<label>{{ label }}</label><input type={{ myType }} class="form-control"placeholder={{myPlaceholder}} name="myName" required>')({label:this.config.myForm[a].label,myType:this.config.myForm[a].type,myPlaceholder:this.config.myForm[a].placeholder,myName:this.config.myForm[a].name}),n.appendChild(i)}var s=document.createElement("button");s.classList.add("btn"),s.classList.add("btn-default"),s.innerHTML="create",n.appendChild(s),e.appendChild(n);var o=document.createElement("nav");o.classList.add("nav"),o.classList.add("nav-tabs");for(var a=0;a<this.config.tabs.list.length;a++){var l=document.createElement("li");l.classList.add("tab__control__item"),l.innerHTML=t('<a href="#">{{ title }}</a>')({title:this.config.tabs.list[a].name}),o.appendChild(l),"All"==this.config.tabs.list[a].name&&l.classList.add("active")}e.appendChild(o),this.toDo.innerHTML="";for(var a=0;a<this.config.tasks.list.length;a++)this.renderTask(this.config.tasks.list[a]);e.appendChild(this.toDo)},e.createTask=function(e){for(var t=[],n=0;n<e.elements.length;n++)t[n]="date"==e.elements[n].type?new Date(e.elements[n].value):e.elements[n].value?e.elements[n].value:!1;var a=new this.Task(t);this.config.tasks.list.push(a),e.reset(),this.renderTask(a)},e.addFunctionality=function(t){for(var n=t.getElementsByClassName("tab__control__item"),a=0;a<n.length;a++)n[a].addEventListener("click",function(){i("tab__control__item"),this.classList.add("active");for(var t=0;t<e.config.tabs.list.length;t++)e.config.tabs.list[t].name==this.textContent&&s(e.toDo,e.config.tabs.list[t].condition)});var o=t.getElementsByClassName("form-inline")[0];o.onsubmit=function(n){e.createTask(this),e.addFunctionality(t),n.preventDefault()}},e}({});MODULE.init(document.getElementsByClassName("container")[0]);